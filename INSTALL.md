# FK_CNKI 安装指南

本指南将帮助您安装和配置FK_CNKI Chrome扩展，**主要功能是解除CNKI知网页面的文字复制限制**。

## 📋 安装前准备

### 系统要求
- Chrome浏览器 88.0 或更高版本
- Windows 10/11, macOS 10.15+, 或 Linux

### 下载项目文件
1. 下载或克隆FK_CNKI项目到本地
2. 确保项目文件夹包含所有必要文件

## 🔧 文件结构要求

### 必需文件
确保项目文件夹包含以下核心文件：

- `manifest.json` - 扩展配置文件
- `popup.html` - 弹出窗口界面
- `popup.css` - 弹出窗口样式
- `popup.js` - 弹出窗口逻辑
- `background.js` - 后台服务脚本
- `content.js` - 内容脚本（核心功能）
- `content.css` - 内容样式

### 图标文件
确保`icons/`文件夹包含以下图标文件：

- `icon16.png` - 16x16像素
- `icon32.png` - 32x32像素
- `icon48.png` - 48x48像素
- `icon128.png` - 128x128像素

**注意**：如果图标文件缺失，扩展可能无法正常显示图标，但核心功能仍然可用。

## 🚀 第二步：安装扩展

### 方法1：开发者模式安装（推荐）

1. **打开扩展管理页面**
   - 在Chrome地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 在页面右上角找到"开发者模式"开关
   - 点击开关启用开发者模式

3. **加载扩展**
   - 点击"加载已解压的扩展程序"按钮
   - 选择FK_CNKI项目文件夹
   - 点击"选择文件夹"

4. **确认安装**
   - 扩展应该出现在扩展列表中
   - 状态显示为"已启用"
   - 浏览器工具栏应该显示FK_CNKI图标

### 方法2：打包安装

1. **生成.crx文件**
   - 在开发者模式下，点击"打包扩展程序"
   - 选择FK_CNKI项目文件夹
   - 点击"打包扩展程序"
   - 等待生成完成

2. **安装.crx文件**
   - 将生成的.crx文件拖拽到扩展程序页面
   - 确认安装
   - 重启Chrome浏览器

## ✅ 第三步：验证安装

### 基本验证
1. **检查扩展图标**
   - 浏览器工具栏应该显示FK_CNKI图标
   - 点击图标应该弹出设置窗口

2. **检查扩展状态**
   - 在 `chrome://extensions/` 页面确认扩展已启用
   - 检查是否有错误信息

### 功能验证
1. **访问CNKI页面**
   - 打开任意CNKI知网页面
   - 页面顶部应该显示"CNKI助手"工具栏
   - 工具栏右侧应该显示"✅ 复制已启用"

2. **测试复制功能**
   - 尝试选择页面上的文字
   - 使用Ctrl+C复制选中的文字
   - 使用Ctrl+V粘贴到其他地方

## 🧪 第四步：测试复制限制解除功能

### 使用测试页面
项目提供了专门的测试页面来验证功能：

1. **打开测试页面**
   - 在项目文件夹中找到 `test-copy.html`
   - 用Chrome浏览器打开该页面

2. **运行测试**
   - 页面会自动检查插件状态
   - 按照页面提示进行各项测试
   - 记录测试结果

### 测试项目
- ✅ **文字选择测试**：尝试选择受限制的文字
- ✅ **复制功能测试**：使用Ctrl+C复制文字
- ✅ **粘贴功能测试**：使用Ctrl+V粘贴文字
- ✅ **右键菜单测试**：检查右键菜单是否可用
- ✅ **键盘快捷键测试**：测试Ctrl+A、Ctrl+C等快捷键

### 预期结果
如果插件工作正常，您应该能够：
- 选择任何文字内容（包括原本受限制的文字）
- 正常使用复制粘贴功能
- 看到正常的右键菜单
- 使用所有键盘快捷键

## 🔍 故障排除

### 常见问题

#### 1. 扩展无法加载
**症状：** 扩展显示错误或无法启用
**解决方案：**
- 检查项目文件夹是否完整
- 确认所有图标文件已生成
- 查看Chrome控制台的错误信息
- 尝试重新加载扩展

#### 2. 工具栏不显示
**症状：** 访问CNKI页面时没有看到工具栏
**解决方案：**
- 确认扩展已启用
- 刷新页面
- 检查是否在正确的域名下（*.cnki.net 或 *.cnki.com）
- 查看浏览器控制台是否有错误

#### 3. 复制功能不工作
**症状：** 仍然无法选择或复制文字
**解决方案：**
- 确认页面显示"✅ 复制已启用"
- 刷新页面重试
- 检查是否有其他扩展冲突
- 使用测试页面验证功能

#### 4. 图标显示异常
**症状：** 扩展图标显示为默认图标或损坏
**解决方案：**
- 重新生成PNG图标文件
- 确认图标文件路径正确
- 重启Chrome浏览器

### 调试步骤
1. **打开开发者工具**
   - 按F12或右键选择"检查"
   - 查看Console标签页的错误信息

2. **检查扩展权限**
   - 在扩展管理页面确认所有权限已授予
   - 检查host_permissions是否正确

3. **查看扩展日志**
   - 在扩展管理页面点击"检查视图"
   - 查看background和content script的日志

## 📱 移动设备支持

FK_CNKI主要设计用于桌面版Chrome浏览器。在移动设备上：
- 部分功能可能不可用
- 建议使用桌面版Chrome进行完整功能测试

## 🔒 权限说明

FK_CNKI需要以下权限：

- **activeTab**：访问当前活动标签页
- **storage**：存储用户设置和下载历史
- **scripting**：动态注入脚本到网页
- **host_permissions**：访问CNKI域名（*.cnki.net, *.cnki.com）

这些权限仅用于提供核心功能，不会收集个人隐私信息。

## 📞 获取帮助

如果遇到问题，请尝试以下方式：

1. **查看项目文档**
   - 阅读 `README.md` 了解项目详情
   - 检查 `INSTALL.md` 的故障排除部分

2. **使用测试页面**
   - 运行 `test-copy.html` 进行功能诊断
   - 记录具体的错误现象

3. **提交问题报告**
   - 描述问题现象和复现步骤
   - 提供Chrome版本和操作系统信息
   - 附上控制台错误信息

### 作者联系方式
- **GitHub**: [liq45](https://github.com/liq45)
- **Email**: liq45@qq.com

## 🎯 下一步

安装完成后，您可以：

1. **访问CNKI知网**测试复制功能
2. **自定义设置**调整插件行为
3. **探索其他功能**如下载管理和搜索增强
4. **参与项目开发**提交改进建议

---

**注意**：本插件仅用于学习和研究目的，请遵守相关网站的使用条款和版权规定。使用本插件解除复制限制时，请确保符合学术诚信和版权保护要求。
